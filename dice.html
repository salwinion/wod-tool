<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Dice - WoD</title>

<script type="text/javascript">
<!--
function rollTest(numberOfDice, difficulty) {
	if (!isInteger(numberOfDice)) numberOfDice = 1;
	if (!isInteger(difficulty)) difficulty = 8;
	if (difficulty < 2) difficulty = 2;
	
	var resultOfDice = new Array();
	var hits = 0;
	var ones = 0;
	for(i = numberOfDice; i > 0; ) {
		resultOfDice.push(roll = rollDice(10));
		if (roll >= difficulty) {
			++hits;
		} else if (roll == 1) {
			++ones;
		}
		if (!document.forms[0].ruleOfTen.checked || roll != 10) {
			--i;
		}
	}

	var result = numberOfDice + "/" + difficulty + ": ";
	if (hits > ones) {
		result += "+" + (hits - ones);
	} else if (hits == 0 && ones > 0) {
		result += "fatal"
	} else {
		result += "fail"
	}

	if (document.forms[0].verbose.checked) {
		result += " / ";
		for (i = 0; i < resultOfDice.length; ++i) {
			if (i > 0) {
				result += ", ";
			}
			result += resultOfDice[i];
		}
	}
	document.forms[0].result.value = result + "\n" + document.forms[0].result.value;
}

function rollDice(numberOfSides) {
	return Math.floor((Math.random()*numberOfSides) + 1);
}

function isInteger(value){ 
	if((parseFloat(value) == parseInt(value)) && !isNaN(value)) {
		return true;
	} else {
		return false;
	} 
}

// -->
</script>
	
</head>

<body>

<form>
<input type="checkbox" id="ruleOfTen" />rule of 10</br>
<span>poll</span><br />
<input type="text" id="poll" width="2" /><br />
<input type="button" value="1" onClick="document.forms[0].poll.value = 1" />
<input type="button" value="2" onClick="document.forms[0].poll.value = 2" />
<input type="button" value="3" onClick="document.forms[0].poll.value = 3" />
<input type="button" value="4" onClick="document.forms[0].poll.value = 4" />
<input type="button" value="5" onClick="document.forms[0].poll.value = 5" /><br />
<input type="button" value="6" onClick="document.forms[0].poll.value = 6" />
<input type="button" value="7" onClick="document.forms[0].poll.value = 7" />
<input type="button" value="8" onClick="document.forms[0].poll.value = 8" />
<input type="button" value="9" onClick="document.forms[0].poll.value = 9" />
<input type="button" value="10" onClick="document.forms[0].poll.value = 10" /><br />
<span>difficulty</span><br />
<input type="text" id="difficulty" width="2" /><br />
<input type="button" value="1" disabled="disabled" onClick="document.forms[0].difficulty.value = 1" />
<input type="button" value="2" onClick="document.forms[0].difficulty.value = 2" />
<input type="button" value="3" onClick="document.forms[0].difficulty.value = 3" />
<input type="button" value="4" onClick="document.forms[0].difficulty.value = 4" />
<input type="button" value="5" onClick="document.forms[0].difficulty.value = 5" /><br />
<input type="button" value="6" onClick="document.forms[0].difficulty.value = 6" />
<input type="button" value="7" onClick="document.forms[0].difficulty.value = 7" />
<input type="button" value="8" onClick="document.forms[0].difficulty.value = 8" />
<input type="button" value="9" onClick="document.forms[0].difficulty.value = 9" />
<input type="button" value="10" onClick="document.forms[0].difficulty.value = 10" /><br />
<input type="button" value="Roll" onClick="rollTest(document.forms[0].poll.value, document.forms[0].difficulty.value)" />
<input type="button" value="Clear" onClick="document.forms[0].result.value=''" />
<input type="checkbox" id="verbose" />verbose<br />
<textarea id="result" cols=25 rows=6></textarea>
</form>

</body>
</html>
